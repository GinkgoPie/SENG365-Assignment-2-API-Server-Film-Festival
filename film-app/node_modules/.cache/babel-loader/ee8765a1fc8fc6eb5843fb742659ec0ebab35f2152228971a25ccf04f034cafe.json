{"ast":null,"code":"import { create } from 'zustand';\nconst getLocalStorage = key => JSON.parse(window.localStorage.getItem(key));\nconst setLocalStorage = (key, value) => window.localStorage.setItem(key, JSON.stringify(value));\nconst useStore = create(set => ({\n  films: getLocalStorage('films') || [],\n  setFilms: films => set(() => {\n    setLocalStorage('films', films);\n    return {\n      films: films\n    };\n  }),\n  // editFilm: (film: User, newUsername) => set((state) => {\n  //     const temp = state.users.map(u => u.user_id === user.user_id ?\n  //         ({...u, username: newUsername} as User): u) setLocalStorage('users', temp)\n  //     return {users: temp}\n  // }),\n  removeFilm: film => set(state => {\n    setLocalStorage('films', state.films.filter(f => f.filmId !== user.user_id));\n    return {\n      users: state.users.filter(u => u.user_id !== user.user_id)\n    };\n  })\n}));\nexport const useFilmStore = useStore;","map":{"version":3,"names":["create","getLocalStorage","key","JSON","parse","window","localStorage","getItem","setLocalStorage","value","setItem","stringify","useStore","set","films","setFilms","removeFilm","film","state","filter","f","filmId","user","user_id","users","u","useFilmStore"],"sources":["/Users/baojiahe/Desktop/SENG365/seng365-assignment2-2023/film-app/src/store/film.ts"],"sourcesContent":["import {create} from 'zustand';\nimport FilmList from \"../components/Films\";\ninterface FilmsState {\n    films: Film[];\n    setFilms: (films: Film[]) => void;\n\n    //editFilm: (film: film, newUsername: string) => void;\n\n    removeFilm: (film: Film) => void;\n}\n\nconst getLocalStorage = (key: string): Film[] => JSON.parse(window.localStorage.getItem(key) as string);\nconst setLocalStorage = (key: string, value:Film[]) => window.localStorage.setItem(key, JSON.stringify(value));\n\nconst useStore = create<FilmsState>((set) => ({\n\n    films: getLocalStorage('films') || [],\n    setFilms: (films: Array<Film>) => set(() => {\n        setLocalStorage('films', films)\n        return {films: films} }),\n    // editFilm: (film: User, newUsername) => set((state) => {\n    //     const temp = state.users.map(u => u.user_id === user.user_id ?\n    //         ({...u, username: newUsername} as User): u) setLocalStorage('users', temp)\n    //     return {users: temp}\n    // }),\n    removeFilm: (film: Film) => set((state) => {\n        setLocalStorage('films', state.films.filter(f => f.filmId !== user.user_id))\n        return {users: state.users.filter(u => u.user_id !== user.user_id)}\n    })\n\n}))\nexport const useFilmStore = useStore;"],"mappings":"AAAA,SAAQA,MAAM,QAAO,SAAS;AAW9B,MAAMC,eAAe,GAAIC,GAAW,IAAaC,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACL,GAAG,CAAW,CAAC;AACvG,MAAMM,eAAe,GAAGA,CAACN,GAAW,EAAEO,KAAY,KAAKJ,MAAM,CAACC,YAAY,CAACI,OAAO,CAACR,GAAG,EAAEC,IAAI,CAACQ,SAAS,CAACF,KAAK,CAAC,CAAC;AAE9G,MAAMG,QAAQ,GAAGZ,MAAM,CAAca,GAAG,KAAM;EAE1CC,KAAK,EAAEb,eAAe,CAAC,OAAO,CAAC,IAAI,EAAE;EACrCc,QAAQ,EAAGD,KAAkB,IAAKD,GAAG,CAAC,MAAM;IACxCL,eAAe,CAAC,OAAO,EAAEM,KAAK,CAAC;IAC/B,OAAO;MAACA,KAAK,EAAEA;IAAK,CAAC;EAAC,CAAC,CAAC;EAC5B;EACA;EACA;EACA;EACA;EACAE,UAAU,EAAGC,IAAU,IAAKJ,GAAG,CAAEK,KAAK,IAAK;IACvCV,eAAe,CAAC,OAAO,EAAEU,KAAK,CAACJ,KAAK,CAACK,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKC,IAAI,CAACC,OAAO,CAAC,CAAC;IAC5E,OAAO;MAACC,KAAK,EAAEN,KAAK,CAACM,KAAK,CAACL,MAAM,CAACM,CAAC,IAAIA,CAAC,CAACF,OAAO,KAAKD,IAAI,CAACC,OAAO;IAAC,CAAC;EACvE,CAAC;AAEL,CAAC,CAAC,CAAC;AACH,OAAO,MAAMG,YAAY,GAAGd,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}